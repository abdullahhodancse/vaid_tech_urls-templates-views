<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2 class="mb-4">Your Profile</h2>

    {% if profile_type == 'student' %}
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">{{ profile.full_name }}</h5>
            <p class="card-text"><strong>Roll:</strong> {{ profile.roll }}</p>
            <p class="card-text"><strong>Reg:</strong> {{ profile.reg }}</p>
            <p class="card-text"><strong>Department:</strong> {{ profile.new_department }}</p>
            <p class="card-text"><strong>Session:</strong> {{ profile.session }}</p>
            <p class="card-text"><strong>Subjects:</strong> 
                {% for subject in profile.subjects.all %}
                    {{ subject.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
            <p class="card-text"><strong>Teachers:</strong> 
                {% for teacher in profile.teacher.all %}
                    {{ teacher.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
            <p class="card-text"><strong>Total Files Uploaded:</strong> {{ file_count }}</p>
        </div>
    </div>

    {% elif profile_type == 'teacher' %}
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">{{ profile.name }}</h5>
            <p class="card-text"><strong>Salary:</strong> {{ profile.slary }}</p>
            <p class="card-text"><strong>Department:</strong> {{ profile.department }}</p>
            <p class="card-text"><strong>Subjects:</strong> 
                {% for sub in profile.subject.all %}
                    {{ sub.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
            <p class="card-text"><strong>Total Files Uploaded:</strong> {{ file_count }}</p>
        </div>
    </div>

    {% else %}
    <p>No profile found.</p>
    {% endif %}

    <a href="{% url 'edit' %}" class="btn btn-primary mt-3">Edit Profile</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
